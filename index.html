<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC Transporte - Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="assets/logo.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Tela de Carregamento -->
    <div id="loading" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>Carregando AC Transporte...</p>
    </div>

    <!-- Conte√∫do Principal -->
    <div class="container" id="mainContent" style="display: none;">
        <!-- Header -->
        <header class="main-header">
            <div class="logo-container">
                <img src="assets/logo.jpg" alt="AC Parceria Logo" class="logo" 
                     onerror="this.src='https://via.placeholder.com/150/8B0000/FFFFFF?text=AC+Logo'">
                <div>
                    <h1>AC Parceria e Terraplenagem</h1>
                    <p class="subtitle">Portal de Transporte</p>
                </div>
            </div>
        </header>

        <!-- Avatar e Boas-Vindas -->
        <section class="welcome-section">
            <div class="avatar-container">
                <img src="assets/avatar.png" alt="Avatar AC" class="avatar"
                     onerror="this.src='https://via.placeholder.com/200/8B0000/FFFFFF?text=AC'">
            </div>
            <div class="welcome-text">
                <h2>Bem-vindo ao Portal de Transporte</h2>
                <p>Sistema completo para gest√£o de rotas, motoristas e passageiros</p>
                
                <div class="info-card">
                    <i class="fas fa-clock"></i>
                    <div>
                        <h4>Importante</h4>
                        <p>Controle de ve√≠culo deve ser preenchido <strong>2√ó ao dia</strong> (entrada e sa√≠da)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sele√ß√£o de Perfil -->
        <section class="profile-section">
            <h3><i class="fas fa-user-circle"></i> Selecione seu perfil:</h3>
            
            <div class="profile-cards">
                <!-- Motorista -->
                <div class="profile-card" onclick="selectProfile('motorista')">
                    <div class="profile-icon driver">
                        <i class="fas fa-bus"></i>
                    </div>
                    <h4>Motorista</h4>
                    <p>Controle de rotas e ve√≠culos</p>
                    <ul class="profile-features">
                        <li><i class="fas fa-check"></i> Registrar entrada/sa√≠da</li>
                        <li><i class="fas fa-check"></i> Seguir rotas</li>
                        <li><i class="fas fa-check"></i> Ver escala</li>
                    </ul>
                </div>

                <!-- Passageiro -->
                <div class="profile-card" onclick="selectProfile('passageiro')">
                    <div class="profile-icon passenger">
                        <i class="fas fa-users"></i>
                    </div>
                    <h4>Passageiro</h4>
                    <p>Acompanhar rotas e motoristas</p>
                    <ul class="profile-features">
                        <li><i class="fas fa-check"></i> Ver rotas dispon√≠veis</li>
                        <li><i class="fas fa-check"></i> Acompanhar motorista</li>
                        <li><i class="fas fa-check"></i> Receber avisos</li>
                    </ul>
                </div>

                <!-- Administrador -->
                <div class="profile-card" onclick="selectProfile('admin')">
                    <div class="profile-icon admin">
                        <i class="fas fa-user-cog"></i>
                    </div>
                    <h4>Administrador</h4>
                    <p>Gerenciar todo o sistema</p>
                    <ul class="profile-features">
                        <li><i class="fas fa-check"></i> Gerenciar avisos</li>
                        <li><i class="fas fa-check"></i> Ver localiza√ß√µes</li>
                        <li><i class="fas fa-check"></i> Gerenciar escalas</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Instru√ß√µes de Instala√ß√£o -->
        <section class="install-section">
            <div class="install-card">
                <h4><i class="fas fa-mobile-alt"></i> Instalar como App</h4>
                <p>Para melhor experi√™ncia, instale este portal na tela inicial do seu celular:</p>
                
                <div class="install-steps">
                    <div class="step">
                        <span class="step-number">1</span>
                        <p>Toque em <strong>Compartilhar</strong> (üì§)</p>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <p>Selecione <strong>Adicionar √† Tela Inicial</strong></p>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <p>Toque em <strong>Adicionar</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bot√£o de WhatsApp Flutuante -->
        <a href="https://wa.me/559392059914?text=Ol√°,%20preciso%20de%20suporte%20no%20app%20AC%20Transporte" 
           class="whatsapp-float" target="_blank">
            <i class="fab fa-whatsapp"></i>
        </a>
    </div>

    <!-- Modal de Login -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h3 id="modalTitle">Acesso ao Sistema</h3>
            
            <!-- Formul√°rio Motorista -->
            <div id="driverForm" class="login-form">
                <div class="form-group">
                    <label for="matricula"><i class="fas fa-id-card"></i> Matr√≠cula</label>
                    <input type="text" id="matricula" placeholder="Digite sua matr√≠cula" required>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-map-marker-alt"></i> Localiza√ß√£o</label>
                    <div class="location-request">
                        <p>Precisamos da sua localiza√ß√£o para as rotas</p>
                        <div class="location-buttons">
                            <button class="btn-primary" onclick="allowLocation()">
                                <i class="fas fa-check"></i> Permitir
                            </button>
                            <button class="btn-secondary" onclick="denyLocation()">
                                <i class="fas fa-times"></i> Negar
                            </button>
                        </div>
                    </div>
                </div>
                
                <button class="btn-submit" onclick="loginDriver()">
                    <i class="fas fa-sign-in-alt"></i> Entrar como Motorista
                </button>
            </div>

            <!-- Formul√°rio Admin -->
            <div id="adminForm" class="login-form" style="display: none;">
                <div class="form-group">
                    <label for="adminUser"><i class="fas fa-user"></i> Usu√°rio</label>
                    <input type="text" id="adminUser" placeholder="Digite o usu√°rio" value="Admin">
                </div>
                
                <div class="form-group">
                    <label for="adminPass"><i class="fas fa-lock"></i> Senha</label>
                    <input type="password" id="adminPass" placeholder="Digite a senha" value="050370">
                </div>
                
                <button class="btn-submit" onclick="loginAdmin()">
                    <i class="fas fa-sign-in-alt"></i> Entrar como Administrador
                </button>
                
                <div class="login-info">
                    <p><strong>Usu√°rio padr√£o:</strong> Admin</p>
                    <p><strong>Senha padr√£o:</strong> 050370</p>
                </div>
            </div>

            <!-- Acesso Passageiro -->
            <div id="passengerForm" class="login-form" style="display: none;">
                <div class="direct-access">
                    <i class="fas fa-check-circle"></i>
                    <h4>Acesso Direto</h4>
                    <p>Como passageiro, voc√™ tem acesso imediato ao sistema.</p>
                    <button class="btn-submit" onclick="accessPassenger()">
                        <i class="fas fa-arrow-right"></i> Continuar como Passageiro
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Esconder loading ap√≥s 1 segundo
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                
                // Verificar se j√° tem perfil salvo
                const savedProfile = localStorage.getItem('userProfile');
                if (savedProfile) {
                    selectProfile(savedProfile);
                }
            }, 1000);
        });

        let currentProfile = '';

        function selectProfile(profile) {
            currentProfile = profile;
            
            // Atualizar t√≠tulo do modal
            const titles = {
                'motorista': 'Acesso Motorista',
                'admin': 'Acesso Administrador',
                'passageiro': 'Acesso Passageiro'
            };
            
            document.getElementById('modalTitle').textContent = titles[profile];
            
            // Mostrar formul√°rio correto
            document.getElementById('driverForm').style.display = 
                profile === 'motorista' ? 'block' : 'none';
            document.getElementById('adminForm').style.display = 
                profile === 'admin' ? 'block' : 'none';
            document.getElementById('passengerForm').style.display = 
                profile === 'passageiro' ? 'block' : 'none';
            
            // Abrir modal
            document.getElementById('loginModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        function allowLocation() {
            alert('Localiza√ß√£o permitida!');
            // Aqui voc√™ implementaria a geolocaliza√ß√£o real
        }

        function denyLocation() {
            alert('Localiza√ß√£o negada. Algumas funcionalidades n√£o estar√£o dispon√≠veis.');
        }

        function loginDriver() {
            const matricula = document.getElementById('matricula').value;
            if (!matricula) {
                alert('Por favor, digite sua matr√≠cula!');
                return;
            }
            
            localStorage.setItem('userProfile', 'motorista');
            localStorage.setItem('driverMatricula', matricula);
            
            alert(`Bem-vindo, motorista ${matricula}!`);
            window.location.href = 'motorista.html';
        }

        function loginAdmin() {
            const user = document.getElementById('adminUser').value;
            const pass = document.getElementById('adminPass').value;
            
            if (user === 'Admin' && pass === '050370') {
                localStorage.setItem('userProfile', 'admin');
                alert('Acesso administrativo concedido!');
                window.location.href = 'admin.html';
            } else {
                alert('Usu√°rio ou senha incorretos!');
            }
        }

        function accessPassenger() {
            localStorage.setItem('userProfile', 'passageiro');
            alert('Acesso concedido!');
            window.location.href = 'passageiro.html';
        }

        // Fechar modal ao clicar fora
        window.onclick = function(event) {
            const modal = document.getElementById('loginModal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
