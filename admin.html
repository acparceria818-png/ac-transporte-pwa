<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel Administrativo - AC Transporte</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="assets/logo.jpg">
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="firebase-config.js"></script>
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Editor Rich Text -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  
  <!-- Charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="admin-page">
  <!-- Header Admin -->
  <header class="admin-header">
    <div class="container">
      <div class="header-content">
        <button class="back-btn" onclick="goBack()">
          <i class="fas fa-arrow-left"></i>
        </button>
        <div class="admin-info">
          <div class="admin-avatar">
            <i class="fas fa-user-cog"></i>
          </div>
          <div>
            <h2>Painel Administrativo</h2>
            <p>AC Parceria e Terraplenagem</p>
          </div>
        </div>
        <div class="header-actions">
          <span class="admin-time" id="currentTime">--:--</span>
          <button class="icon-btn" id="darkToggle" title="Alternar tema">
            <i class="fas fa-moon"></i>
          </button>
          <button class="icon-btn" onclick="logout()" title="Sair">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Dashboard Admin -->
  <main class="container">
    <!-- Estatísticas -->
    <div class="admin-stats">
      <div class="stat-card">
        <div class="stat-icon" style="background: #4CAF50;">
          <i class="fas fa-bus"></i>
        </div>
        <div class="stat-content">
          <h3 id="activeDrivers">6</h3>
          <p>Motoristas Ativos</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon" style="background: #2196F3;">
          <i class="fas fa-route"></i>
        </div>
        <div class="stat-content">
          <h3 id="activeRoutes">4</h3>
          <p>Rotas em Andamento</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon" style="background: #FF9800;">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="stat-content">
          <h3 id="pendingEmergencies">0</h3>
          <p>Emergências Pendentes</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon" style="background: #9C27B0;">
          <i class="fas fa-comments"></i>
        </div>
        <div class="stat-content">
          <h3 id="newFeedbacks">3</h3>
          <p>Novos Feedbacks</p>
        </div>
      </div>
    </div>
    
    <!-- Menu Admin -->
    <div class="admin-menu">
      <!-- Coluna 1 -->
      <div class="menu-column">
        <!-- Controle de Veículos -->
        <div class="menu-card large" onclick="openVehicleControls()">
          <div class="menu-icon">
            <i class="fas fa-clipboard-list"></i>
          </div>
          <div class="menu-content">
            <h3>Controle de Veículos</h3>
            <p>Verifique os registros de entrada e saída</p>
            <div class="menu-badge" id="controlCount">15 registros hoje</div>
          </div>
          <div class="menu-arrow">
            <i class="fas fa-chevron-right"></i>
          </div>
        </div>
        
        <!-- Notificar App -->
        <div class="menu-card" onclick="openNotificationPanel()">
          <div class="menu-icon">
            <i class="fas fa-bell"></i>
          </div>
          <div class="menu-content">
            <h3>Notificar App</h3>
            <p>Envie notificações para todos os usuários</p>
          </div>
        </div>
        
        <!-- Gerar Avisos Motorista -->
        <div class="menu-card" onclick="openDriverNoticesEditor()">
          <div class="menu-icon">
            <i class="fas fa-bullhorn"></i>
          </div>
          <div class="menu-content">
            <h3>Avisos Motoristas</h3>
            <p>Crie e gerencie avisos para motoristas</p>
          </div>
        </div>
      </div>
      
      <!-- Coluna 2 -->
      <div class="menu-column">
        <!-- Localização em Tempo Real -->
        <div class="menu-card large" onclick="openRealTimeTracking()">
          <div class="menu-icon">
            <i class="fas fa-map-marker-alt"></i>
          </div>
          <div class="menu-content">
            <h3>Localização em Tempo Real</h3>
            <p>Acompanhe todos motoristas no mapa</p>
            <div class="menu-badge" id="trackingCount">6 sendo rastreados</div>
          </div>
          <div class="menu-arrow">
            <i class="fas fa-chevron-right"></i>
          </div>
        </div>
        
        <!-- Gerar Avisos Passageiro -->
        <div class="menu-card" onclick="openPassengerNoticesEditor()">
          <div class="menu-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="menu-content">
            <h3>Avisos Passageiros</h3>
            <p>Crie avisos para os passageiros</p>
          </div>
        </div>
        
        <!-- Verificar Emergências -->
        <div class="menu-card" onclick="openEmergenciesPanel()">
          <div class="menu-icon">
            <i class="fas fa-exclamation-circle"></i>
          </div>
          <div class="menu-content">
            <h3>Emergências</h3>
            <p>Verifique e gerencie alertas de emergência</p>
          </div>
        </div>
      </div>
      
      <!-- Coluna 3 -->
      <div class="menu-column">
        <!-- Alterar Escala -->
        <div class="menu-card large" onclick="openScheduleManager()">
          <div class="menu-icon">
            <i class="fas fa-calendar-alt"></i>
          </div>
          <div class="menu-content">
            <h3>Gerenciar Escalas</h3>
            <p>Crie e edite escalas dos motoristas</p>
            <div class="menu-badge" id="scheduleCount">4 escalas ativas</div>
          </div>
          <div class="menu-arrow">
            <i class="fas fa-chevron-right"></i>
          </div>
        </div>
        
        <!-- Verificar Feedback -->
        <div class="menu-card" onclick="openFeedbackManager()">
          <div class="menu-icon">
            <i class="fas fa-comment-dots"></i>
          </div>
          <div class="menu-content">
            <h3>Feedbacks</h3>
            <p>Analise feedbacks e reclamações</p>
          </div>
        </div>
        
        <!-- Geofencing -->
        <div class="menu-card" onclick="openGeofencingManager()">
          <div class="menu-icon">
            <i class="fas fa-map-pin"></i>
          </div>
          <div class="menu-content">
            <h3>Geofencing</h3>
            <p>Monitore desvios de rota</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Gráficos e Relatórios -->
    <div class="admin-charts">
      <div class="chart-card">
        <h3><i class="fas fa-chart-line"></i> Uso do App por Hora</h3>
        <canvas id="usageChart"></canvas>
      </div>
      
      <div class="chart-card">
        <h3><i class="fas fa-route"></i> Rotas Mais Utilizadas</h3>
        <canvas id="routesChart"></canvas>
      </div>
    </div>
  </main>
  
  <!-- Modal Controle de Veículos -->
  <div id="vehicleControlsModal" class="modal-back" style="display: none;">
    <div class="modal large-modal">
      <button class="close" onclick="closeModal('vehicleControlsModal')">✕</button>
      <h3><i class="fas fa-clipboard-list"></i> Controle de Veículos</h3>
      
      <div class="modal-actions">
        <button class="btn-export" onclick="exportControls()">
          <i class="fas fa-file-export"></i> Exportar para Excel
        </button>
        <button class="btn-filter" onclick="filterControls('today')">
          <i class="fas fa-filter"></i> Filtrar por Data
        </button>
      </div>
      
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>Motorista</th>
              <th>Matrícula</th>
              <th>Entrada</th>
              <th>Saída</th>
              <th>Data</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="controlsTable">
            <tr>
              <td>João Silva</td>
              <td>MAT001</td>
              <td>08:15</td>
              <td>17:45</td>
              <td>15/09/2024</td>
              <td><span class="status-badge completed">Completo</span></td>
            </tr>
            <tr>
              <td>Maria Santos</td>
              <td>MAT002</td>
              <td>08:30</td>
              <td>--:--</td>
              <td>15/09/2024</td>
              <td><span class="status-badge pending">Pendente</span></td>
            </tr>
            <!-- Mais registros serão carregados -->
          </tbody>
        </table>
      </div>
      
      <div class="table-info">
        <p><i class="fas fa-info-circle"></i> Total de registros: <span id="totalControls">15</span> | Pendentes: <span id="pendingControls">3</span></p>
      </div>
    </div>
  </div>
  
  <!-- Modal Notificações -->
  <div id="notificationModal" class="modal-back" style="display: none;">
    <div class="modal">
      <button class="close" onclick="closeModal('notificationModal')">✕</button>
      <h3><i class="fas fa-bell"></i> Enviar Notificação</h3>
      
      <div class="form-group">
        <label for="notificationTitle">Título:</label>
        <input type="text" id="notificationTitle" placeholder="Ex: Manutenção de Rotas">
      </div>
      
      <div class="form-group">
        <label for="notificationMessage">Mensagem:</label>
        <textarea id="notificationMessage" rows="4" placeholder="Digite a mensagem da notificação..."></textarea>
      </div>
      
      <div class="form-group">
        <label for="notificationAudience">Destinatários:</label>
        <div class="audience-selector">
          <label class="checkbox-label">
            <input type="checkbox" id="audienceDrivers" checked> Motoristas
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="audiencePassengers" checked> Passageiros
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="audienceAll"> Todos
          </label>
        </div>
      </div>
      
      <div class="form-group">
        <label for="notificationType">Tipo:</label>
        <select id="notificationType">
          <option value="info">Informativa</option>
          <option value="warning">Alerta</option>
          <option value="urgent">Urgente</option>
          <option value="update">Atualização</option>
        </select>
      </div>
      
      <div class="notification-preview">
        <h4>Prévia da Notificação:</h4>
        <div class="preview-card">
          <div class="preview-header">
            <i class="fas fa-bell"></i>
            <h5 id="previewTitle">Título da Notificação</h5>
          </div>
          <p id="previewMessage">Mensagem da notificação aparecerá aqui...</p>
          <div class="preview-footer">
            <span id="previewAudience">Para: Motoristas e Passageiros</span>
            <span id="previewTime">Agora</span>
          </div>
        </div>
      </div>
      
      <button class="btn-send-notification" onclick="sendNotification()">
        <i class="fas fa-paper-plane"></i> Enviar Notificação
      </button>
    </div>
  </div>
  
  <!-- Modal Editor Avisos Motorista -->
  <div id="driverNoticesModal" class="modal-back" style="display: none;">
    <div class="modal large-modal">
      <button class="close" onclick="closeModal('driverNoticesModal')">✕</button>
      <h3><i class="fas fa-bullhorn"></i> Editor de Avisos - Motoristas</h3>
      
      <div class="editor-tabs">
        <button class="tab-btn active" onclick="openEditorTab('create')">Criar Novo</button>
        <button class="tab-btn" onclick="openEditorTab('manage')">Gerenciar</button>
        <button class="tab-btn" onclick="openEditorTab('templates')">Templates</button>
      </div>
      
      <!-- Criar Aviso -->
      <div class="tab-content active" id="createTab">
        <div class="form-group">
          <label for="noticeTitle">Título do Aviso:</label>
          <input type="text" id="noticeTitle" placeholder="Ex: Nova Escala de Setembro">
        </div>
        
        <div class="form-group">
          <label for="noticeType">Tipo:</label>
          <select id="noticeType">
            <option value="info">Informativo</option>
            <option value="warning">Alerta</option>
            <option value="urgent">Urgente</option>
            <option value="update">Atualização</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="noticeExpiry">Validade:</label>
          <input type="date" id="noticeExpiry">
        </div>
        
        <div class="form-group">
          <label>Conteúdo:</label>
          <div id="driverNoticeEditor" style="height: 300px;"></div>
        </div>
        
        <div class="form-group">
          <label>Anexos:</label>
          <div class="file-upload">
            <input type="file" id="noticeAttachment" accept="image/*,.pdf,.doc,.docx">
            <label for="noticeAttachment" class="btn-upload">
              <i class="fas fa-paperclip"></i> Anexar Arquivo
            </label>
            <span id="fileName">Nenhum arquivo selecionado</span>
          </div>
        </div>
        
        <div class="editor-actions">
          <button class="btn-preview" onclick="previewNotice()">
            <i class="fas fa-eye"></i> Pré-visualizar
          </button>
          <button class="btn-save" onclick="saveDriverNotice()">
            <i class="fas fa-save"></i> Publicar Aviso
          </button>
        </div>
      </div>
      
      <!-- Gerenciar Avisos -->
      <div class="tab-content" id="manageTab">
        <div class="notices-list-admin">
          <div class="notice-admin-item">
            <div class="notice-admin-header">
              <h4>Manutenção Rota 02</h4>
              <div class="notice-admin-actions">
                <button class="btn-edit" onclick="editNotice(1)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="btn-delete" onclick="deleteNotice(1)">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
            <div class="notice-admin-content">
              <p>A Rota 02 está com desvio devido a obras na Av. Principal. Use rota alternativa.</p>
            </div>
            <div class="notice-admin-footer">
              <span class="notice-type info">Informativo</span>
              <span class="notice-date">Publicado: 15/09/2024</span>
              <span class="notice-expiry">Validade: 20/09/2024</span>
            </div>
          </div>
          <!-- Mais avisos -->
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal Localização Tempo Real -->
  <div id="trackingModal" class="modal-back" style="display: none;">
    <div class="modal full-modal">
      <button class="close" onclick="closeModal('trackingModal')">✕</button>
      <h3><i class="fas fa-map-marker-alt"></i> Localização em Tempo Real</h3>
      
      <div class="tracking-controls">
        <button class="btn-refresh-all" onclick="refreshAllLocations()">
          <i class="fas fa-sync-alt"></i> Atualizar Todas
        </button>
        <button class="btn-show-all" onclick="showAllDrivers()">
          <i class="fas fa-eye"></i> Mostrar Todos
        </button>
        <button class="btn-export-locations" onclick="exportLocations()">
          <i class="fas fa-download"></i> Exportar
        </button>
      </div>
      
      <div class="tracking-container">
        <!-- Mapa -->
        <div class="tracking-map" id="adminMap">
          <div class="map-placeholder">
            <i class="fas fa-map-marked-alt"></i>
            <p>Carregando mapa de localização...</p>
          </div>
        </div>
        
        <!-- Lista de Motoristas -->
        <div class="tracking-sidebar">
          <div class="sidebar-header">
            <h4><i class="fas fa-bus"></i> Motoristas Ativos</h4>
            <span class="badge" id="activeCount">6</span>
          </div>
          
          <div class="drivers-track-list">
            <div class="track-driver-item">
              <div class="track-driver-info">
                <div class="track-driver-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div>
                  <h5>João Silva</h5>
                  <p>ROTA 01 • Ônibus 101</p>
                </div>
              </div>
              <div class="track-driver-status">
                <span class="status-indicator active"></span>
                <span class="status-text">Em movimento</span>
              </div>
              <button class="btn-track-driver" onclick="centerOnDriver(1)">
                <i class="fas fa-crosshairs"></i>
              </button>
            </div>
            <!-- Mais motoristas -->
          </div>
          
          <div class="tracking-stats">
            <h4>Estatísticas</h4>
            <div class="stats-grid">
              <div class="stat-mini">
                <i class="fas fa-tachometer-alt"></i>
                <div>
                  <h5>Velocidade Média</h5>
                  <p>42 km/h</p>
                </div>
              </div>
              <div class="stat-mini">
                <i class="fas fa-route"></i>
                <div>
                  <h5>Rotas Ativas</h5>
                  <p>4/6</p>
                </div>
              </div>
              <div class="stat-mini">
                <i class="fas fa-clock"></i>
                <div>
                  <h5>Tempo Médio</h5>
                  <p>2h 15min</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="tracking-footer">
        <div class="geofencing-alerts">
          <h4><i class="fas fa-exclamation-triangle"></i> Alertas de Geofencing</h4>
          <div id="geofencingAlerts">
            <p class="no-alerts">Nenhum desvio de rota detectado</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal Gerenciar Escalas -->
  <div id="scheduleModal" class="modal-back" style="display: none;">
    <div class="modal large-modal">
      <button class="close" onclick="closeModal('scheduleModal')">✕</button>
      <h3><i class="fas fa-calendar-alt"></i> Gerenciar Escalas</h3>
      
      <div class="schedule-manager">
        <div class="schedule-sidebar">
          <h4>Motoristas</h4>
          <div class="drivers-list-admin">
            <div class="driver-admin-item selected" onclick="selectDriver(1)">
              <div class="driver-admin-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div>
                <h5>João Silva</h5>
                <p>MAT001</p>
              </div>
            </div>
            <!-- Mais motoristas -->
          </div>
          
          <button class="btn-add-driver" onclick="addNewDriver()">
            <i class="fas fa-plus"></i> Adicionar Motorista
          </button>
        </div>
        
        <div class="schedule-main">
          <div class="schedule-header">
            <h4 id="selectedDriverName">João Silva - Escala</h4>
            <div class="schedule-actions">
              <button class="btn-print" onclick="printSchedule()">
                <i class="fas fa-print"></i> Imprimir
              </button>
              <button class="btn-export-schedule" onclick="exportSchedule()">
                <i class="fas fa-file-export"></i> Exportar
              </button>
            </div>
          </div>
          
          <div class="schedule-editor">
            <div class="month-selector">
              <button class="btn-prev-month" onclick="prevScheduleMonth()">
                <i class="fas fa-chevron-left"></i>
              </button>
              <h5 id="currentScheduleMonth">Setembro 2024</h5>
              <button class="btn-next-month" onclick="nextScheduleMonth()">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            
            <div class="schedule-grid" id="scheduleGrid">
              <!-- Grade será gerada via JavaScript -->
            </div>
            
            <div class="schedule-legend">
              <div class="legend-item">
                <span class="legend-color working"></span>
                <span>Trabalhando</span>
              </div>
              <div class="legend-item">
                <span class="legend-color off"></span>
                <span>Folga</span>
              </div>
              <div class="legend-item">
                <span class="legend-color vacation"></span>
                <span>Férias</span>
              </div>
            </div>
          </div>
          
          <div class="schedule-summary">
            <h4>Resumo do Mês</h4>
            <div class="summary-stats">
              <div class="summary-item">
                <span>Dias Trabalhados:</span>
                <strong>22</strong>
              </div>
              <div class="summary-item">
                <span>Folgas:</span>
                <strong>8</strong>
              </div>
              <div class="summary-item">
                <span>Horas Totais:</span>
                <strong>176h</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal Feedbacks -->
  <div id="feedbackModal" class="modal-back" style="display: none;">
    <div class="modal large-modal">
      <button class="close" onclick="closeModal('feedbackModal')">✕</button>
      <h3><i class="fas fa-comment-dots"></i> Gerenciar Feedbacks</h3>
      
      <div class="feedback-filters">
        <div class="filter-group">
          <label>Tipo:</label>
          <select id="feedbackFilterType" onchange="filterFeedbacks()">
            <option value="all">Todos</option>
            <option value="suggestion">Sugestões</option>
            <option value="complaint">Reclamações</option>
            <option value="praise">Elogios</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label>Status:</label>
          <select id="feedbackFilterStatus" onchange="filterFeedbacks()">
            <option value="all">Todos</option>
            <option value="pending">Pendentes</option>
            <option value="reviewed">Revisados</option>
            <option value="resolved">Resolvidos</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label>Ordenar por:</label>
          <select id="feedbackSort" onchange="filterFeedbacks()">
            <option value="newest">Mais Recentes</option>
            <option value="oldest">Mais Antigos</option>
            <option value="priority">Prioridade</option>
          </select>
        </div>
      </div>
      
      <div class="feedback-list-admin">
        <div class="feedback-admin-item">
          <div class="feedback-admin-header">
            <h4>Sugestão: Melhorar rotas</h4>
            <span class="feedback-badge suggestion">Sugestão</span>
            <span class="feedback-badge pending">Pendente</span>
          </div>
          <div class="feedback-admin-content">
            <p>Seria interessante ter rotas mais diretas para evitar trânsito nos horários de pico.</p>
          </div>
          <div class="feedback-admin-info">
            <span><i class="fas fa-user"></i> Motorista: João Silva</span>
            <span><i class="fas fa-clock"></i> 14/09/2024 10:30</span>
            <span><i class="fas fa-route"></i> Rota: 01</span>
          </div>
          <div class="feedback-admin-actions">
            <button class="btn-mark-reviewed" onclick="markFeedbackReviewed(1)">
              <i class="fas fa-check"></i> Marcar como Revisado
            </button>
            <button class="btn-reply" onclick="replyToFeedback(1)">
              <i class="fas fa-reply"></i> Responder
            </button>
          </div>
        </div>
        <!-- Mais feedbacks -->
      </div>
      
      <div class="feedback-stats">
        <div class="stat-item">
          <i class="fas fa-inbox"></i>
          <div>
            <h5>Total</h5>
            <p>156</p>
          </div>
        </div>
        <div class="stat-item">
          <i class="fas fa-clock"></i>
          <div>
            <h5>Pendentes</h5>
            <p>23</p>
          </div>
        </div>
        <div class="stat-item">
          <i class="fas fa-check-circle"></i>
          <div>
            <h5>Resolvidos</h5>
            <p>89</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal Geofencing -->
  <div id="geofencingModal" class="modal-back" style="display: none;">
    <div class="modal">
      <button class="close" onclick="closeModal('geofencingModal')">✕</button>
      <h3><i class="fas fa-map-pin"></i> Geofencing - Monitorar Rotas</h3>
      
      <div class="geofencing-config">
        <div class="form-group">
          <label for="selectRouteGeofence">Rota:</label>
          <select id="selectRouteGeofence" onchange="loadRouteGeofence()">
            <option value="">Selecione uma rota</option>
            <option value="adm-01">ROTA ADM 01</option>
            <option value="adm-02">ROTA ADM 02</option>
            <option value="01">ROTA 01</option>
            <option value="02">ROTA 02</option>
            <option value="03">ROTA 03</option>
            <option value="04">ROTA 04</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="geofenceRadius">Raio de Tolerância:</label>
          <div class="slider-container">
            <input type="range" id="geofenceRadius" min="100" max="1000" value="500" step="50">
            <span id="radiusValue">500 metros</span>
          </div>
        </div>
      </div>
      
      <div class="geofencing-map" id="geofenceMap">
        <div class="map-placeholder">
          <i class="fas fa-draw-polygon"></i>
          <p>Selecione uma rota para configurar o geofencing</p>
        </div>
      </div>
      
      <div class="geofencing-alerts-list">
        <h4><i class="fas fa-bell"></i> Alertas Recentes</h4>
        <div id="geofenceAlerts">
          <p class="no-alerts">Nenhum alerta de desvio nas últimas 24 horas</p>
        </div>
      </div>
      
      <div class="geofencing-actions">
        <button class="btn-save-geofence" onclick="saveGeofence()">
          <i class="fas fa-save"></i> Salvar Configuração
        </button>
        <button class="btn-test-geofence" onclick="testGeofence()">
          <i class="fas fa-play"></i> Testar Geofencing
        </button>
      </div>
    </div>
  </div>
  
  <script src="app.js"></script>
  <script>
    // Inicializar página admin
    document.addEventListener('DOMContentLoaded', function() {
      initAdminPage();
      updateStats();
      loadCharts();
      updateTime();
      
      // Atualizar tempo a cada minuto
      setInterval(updateTime, 60000);
    });
    
    function initAdminPage() {
      console.log('Painel administrativo inicializado');
      
      // Inicializar editor Rich Text
      if (typeof Quill !== 'undefined') {
        window.driverNoticeEditor = new Quill('#driverNoticeEditor', {
          theme: 'snow',
          modules: {
            toolbar: [
              ['bold', 'italic', 'underline'],
              ['link', 'image'],
              [{ 'list': 'ordered'}, { 'list': 'bullet' }],
              [{ 'header': [1, 2, 3, false] }],
              ['clean']
            ]
          }
        });
      }
    }
    
    function updateTime() {
      const now = new Date();
      document.getElementById('currentTime').textContent = 
        now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
    }
    
    function updateStats() {
      // Simulação de dados
      document.getElementById('activeDrivers').textContent = '6';
      document.getElementById('activeRoutes').textContent = '4';
      document.getElementById('pendingEmergencies').textContent = '0';
      document.getElementById('newFeedbacks').textContent = '3';
      document.getElementById('controlCount').textContent = '15 registros hoje';
      document.getElementById('trackingCount').textContent = '6 sendo rastreados';
      document.getElementById('scheduleCount').textContent = '4 escalas ativas';
    }
    
    function loadCharts() {
      // Gráfico de uso
      const usageCtx = document.getElementById('usageChart').getContext('2d');
      new Chart(usageCtx, {
        type: 'line',
        data: {
          labels: ['06:00', '08:00', '10:00', '12:00', '14:00', '16:00', '18:00'],
          datasets: [{
            label: 'Motoristas',
            data: [12, 45, 38, 52, 48, 40, 28],
            borderColor: '#4CAF50',
            backgroundColor: 'rgba(76, 175, 80, 0.1)',
            tension: 0.4
          }, {
            label: 'Passageiros',
            data: [8, 35, 42, 58, 45, 35, 22],
            borderColor: '#2196F3',
            backgroundColor: 'rgba(33, 150, 243, 0.1)',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'top' }
          }
        }
      });
      
      // Gráfico de rotas
      const routesCtx = document.getElementById('routesChart').getContext('2d');
      new Chart(routesCtx, {
        type: 'doughnut',
        data: {
          labels: ['Rota 01', 'Rota 02', 'Rota 03', 'Rota 04', 'ADM 01', 'ADM 02'],
          datasets: [{
            data: [35, 25, 20, 12, 5, 3],
            backgroundColor: [
              '#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#607D8B', '#795548'
            ]
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'bottom' }
          }
        }
      });
    }
    
    function openVehicleControls() {
      openModal('vehicleControlsModal');
    }
    
    function openNotificationPanel() {
      openModal('notificationModal');
      updateNotificationPreview();
    }
    
    function openDriverNoticesEditor() {
      openModal('driverNoticesModal');
    }
    
    function openPassengerNoticesEditor() {
      // Similar ao driver, mas para passageiros
      showNotification('info', 'Editor de avisos para passageiros');
    }
    
    function openRealTimeTracking() {
      openModal('trackingModal');
      initAdminMap();
    }
    
    function openEmergenciesPanel() {
      showNotification('info', 'Painel de emergências');
    }
    
    function openScheduleManager() {
      openModal('scheduleModal');
      initScheduleGrid();
    }
    
    function openFeedbackManager() {
      openModal('feedbackModal');
    }
    
    function openGeofencingManager() {
      openModal('geofencingModal');
    }
    
    function updateNotificationPreview() {
      const title = document.getElementById('notificationTitle').value || 'Título da Notificação';
      const message = document.getElementById('notificationMessage').value || 'Mensagem da notificação aparecerá aqui...';
      
      let audience = [];
      if (document.getElementById('audienceDrivers').checked) audience.push('Motoristas');
      if (document.getElementById('audiencePassengers').checked) audience.push('Passageiros');
      
      document.getElementById('previewTitle').textContent = title;
      document.getElementById('previewMessage').textContent = message;
      document.getElementById('previewAudience').textContent = `Para: ${audience.join(' e ')}`;
    }
    
    function sendNotification() {
      const title = document.getElementById('notificationTitle').value;
      const message = document.getElementById('notificationMessage').value;
      
      if (!title || !message) {
        showNotification('error', 'Preencha título e mensagem!');
        return;
      }
      
      showNotification('success', 'Notificação enviada com sucesso!');
      closeModal('notificationModal');
      
      // Aqui você enviaria via Firebase Cloud Messaging
      console.log('Notificação enviada:', { title, message });
    }
    
    function initAdminMap() {
      // Simulação de mapa
      const mapContainer = document.getElementById('adminMap');
      mapContainer.innerHTML = `
        <div class="map-simulation-admin">
          <div class="map-admin-header">
            <h4><i class="fas fa-map"></i> Mapa de Monitoramento</h4>
            <div class="map-zoom">
              <button class="btn-zoom"><i class="fas fa-plus"></i></button>
              <button class="btn-zoom"><i class="fas fa-minus"></i></button>
            </div>
          </div>
          <div class="map-admin-content">
            <div class="route-path-admin">
              <!-- Pontos da rota com motoristas -->
              ${[1,2,3,4,5,6].map(i => `
                <div class="driver-marker-admin" style="top: ${20 + i*10}%; left: ${30 + i*8}%;">
                  <i class="fas fa-bus"></i>
                  <div class="marker-tooltip">Motorista ${i}<br>Rota 0${i}</div>
                </div>
              `).join('')}
            </div>
            <div class="map-admin-legend">
              <div class="legend-item">
                <span class="legend-color on-route"></span>
                <span>Na Rota</span>
              </div>
              <div class="legend-item">
                <span class="legend-color off-route"></span>
                <span>Fora da Rota</span>
              </div>
              <div class="legend-item">
                <span class="legend-color stopped"></span>
                <span>Parado</span>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    function initScheduleGrid() {
      const grid = document.getElementById('scheduleGrid');
      const days = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'];
      const today = new Date();
      
      let html = '<div class="schedule-days">';
      days.forEach(day => {
        html += `<div class="schedule-day-header">${day}</div>`;
      });
      html += '</div>';
      
      // Simulação de 5 semanas
      for (let week = 1; week <= 5; week++) {
        html += '<div class="schedule-week">';
        for (let day = 1; day <= 7; day++) {
          const dayNumber = (week-1)*7 + day;
          const isWorking = dayNumber % 3 !== 0; // Simulação
          const isToday = dayNumber === today.getDate();
          
          html += `
            <div class="schedule-day ${isWorking ? 'working' : 'off'} ${isToday ? 'today' : ''}">
              <div class="day-number">${dayNumber}</div>
              <div class="day-shift">${isWorking ? '08:00-17:00' : 'Folga'}</div>
            </div>
          `;
        }
        html += '</div>';
      }
      
      grid.innerHTML = html;
    }
    
    function centerOnDriver(driverId) {
      showNotification('info', `Centralizando no motorista ${driverId}`);
    }
    
    function logout() {
      if (confirm('Deseja sair do painel administrativo?')) {
        localStorage.removeItem('user_profile');
        window.location.href = 'index.html';
      }
    }
    
    function goBack() {
      window.history.back();
    }
    
    // Atualizar preview da notificação em tempo real
    document.getElementById('notificationTitle').addEventListener('input', updateNotificationPreview);
    document.getElementById('notificationMessage').addEventListener('input', updateNotificationPreview);
    document.querySelectorAll('.audience-selector input').forEach(input => {
      input.addEventListener('change', updateNotificationPreview);
    });
  </script>
  
  <style>
    /* Estilos específicos para admin.html */
    .admin-header {
      background: linear-gradient(135deg, var(--admin-color) 0%, #7B1FA2 100%);
      color: white;
      padding: 15px 0;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .admin-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      margin-right: 15px;
    }
    
    .admin-time {
      background: rgba(255, 255, 255, 0.2);
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 14px;
      margin-right: 10px;
    }
    
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      border-radius: var(--radius);
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: var(--shadow);
      transition: all var(--transition);
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }
    
    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
    }
    
    .stat-content h3 {
      font-size: 28px;
      margin: 0;
      color: var(--dark);
    }
    
    .stat-content p {
      margin: 5px 0 0 0;
      color: #666;
      font-size: 14px;
    }
    
    .admin-menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .menu-column {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .menu-card {
      background: white;
      border-radius: var(--radius);
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: all var(--transition);
      border-left: 4px solid transparent;
    }
    
    .menu-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-hover);
      border-left-color: var(--admin-color);
    }
    
    .menu-card.large {
      flex-direction: column;
      align-items: flex-start;
      padding: 25px;
    }
    
    .menu-icon {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: var(--admin-color);
    }
    
    .menu-content {
      flex: 1;
    }
    
    .menu-content h3 {
      margin: 0 0 8px 0;
      font-size: 18px;
    }
    
    .menu-content p {
      margin: 0;
      color: #666;
      font-size: 14px;
    }
    
    .menu-badge {
      background: var(--admin-color);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-top: 10px;
      display: inline-block;
    }
    
    .menu-arrow {
      color: #ccc;
      font-size: 18px;
    }
    
    .admin-charts {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .chart-card {
      background: white;
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
    }
    
    .chart-card h3 {
      margin: 0 0 20px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .large-modal {
      max-width: 1000px;
    }
    
    .full-modal {
      max-width: 95vw;
      max-height: 90vh;
    }
    
    .modal-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .btn-export, .btn-filter {
      padding: 10px 20px;
      border-radius: 6px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-export {
      background: var(--secondary);
      color: white;
    }
    
    .btn-filter {
      background: #f0f0f0;
      color: var(--dark);
    }
    
    .table-container {
      overflow-x: auto;
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .data-table th {
      background: #f8f9fa;
      padding: 12px;
      text-align: left;
      font-weight: 600;
      color: var(--dark);
      border-bottom: 2px solid #e0e0e0;
      position: sticky;
      top: 0;
    }
    
    .data-table td {
      padding: 12px;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .data-table tr:hover {
      background: #f8f9fa;
    }
    
    .status-badge {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-badge.completed {
      background: #e8f5e9;
      color: #2e7d32;
    }
    
    .status-badge.pending {
      background: #fff3e0;
      color: #ef6c00;
    }
    
    .table-info {
      padding: 10px;
      background: #f8f9fa;
      border-radius: 6px;
      font-size: 14px;
      color: #666;
    }
    
    .audience-selector {
      display: flex;
      gap: 20px;
      margin-top: 10px;
    }
    
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    
    .notification-preview {
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .preview-card {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .preview-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .preview-header i {
      color: var(--admin-color);
      font-size: 18px;
    }
    
    .preview-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }
    
    .btn-send-notification {
      width: 100%;
      padding: 15px;
      background: var(--admin-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .editor-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 10px;
    }
    
    .tab-btn {
      padding: 10px 20px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      font-weight: 600;
      color: #666;
    }
    
    .tab-btn.active {
      color: var(--admin-color);
      border-bottom-color: var(--admin-color);
    }
    
    .file-upload {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    
    .btn-upload {
      padding: 10px 20px;
      background: #f0f0f0;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .editor-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .btn-preview, .btn-save {
      padding: 12px 25px;
      border-radius: 6px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-preview {
      background: #f0f0f0;
      color: var(--dark);
    }
    
    .btn-save {
      background: var(--admin-color);
      color: white;
    }
    
    .notices-list-admin {
      max-height: 400px;
      overflow-y: auto;
    }
    
    .notice-admin-item {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
    }
    
    .notice-admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .notice-admin-actions {
      display: flex;
      gap: 10px;
    }
    
    .btn-edit, .btn-delete {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .btn-edit {
      background: #e3f2fd;
      color: #1976d2;
    }
    
    .btn-delete {
      background: #ffebee;
      color: #d32f2f;
    }
    
    .notice-admin-footer {
      display: flex;
      gap: 15px;
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }
    
    .notice-type {
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: 600;
    }
    
    .notice-type.info {
      background: #e3f2fd;
      color: #1976d2;
    }
    
    .tracking-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .tracking-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      height: 500px;
    }
    
    .tracking-map {
      background: #f8f9fa;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .tracking-sidebar {
      background: white;
      border-radius: 8px;
      padding: 20px;
      overflow-y: auto;
      box-shadow: var(--shadow);
    }
    
    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .badge {
      background: var(--admin-color);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
    }
    
    .drivers-track-list {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .track-driver-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    
    .track-driver-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .track-driver-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .track-driver-status {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .btn-track-driver {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      border: none;
      background: var(--admin-color);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .tracking-stats {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px solid #f0f0f0;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    
    .stat-mini {
      text-align: center;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 6px;
    }
    
    .stat-mini i {
      font-size: 20px;
      color: var(--admin-color);
      margin-bottom: 5px;
    }
    
    .stat-mini h5 {
      margin: 5px 0;
      font-size: 12px;
      color: #666;
    }
    
    .stat-mini p {
      margin: 0;
      font-weight: 600;
    }
    
    .tracking-footer {
      margin-top: 20px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .geofencing-alerts {
      max-height: 150px;
      overflow-y: auto;
    }
    
    .map-simulation-admin {
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .map-admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background: white;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .map-zoom {
      display: flex;
      gap: 5px;
    }
    
    .btn-zoom {
      width: 30px;
      height: 30px;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .map-admin-content {
      flex: 1;
      padding: 20px;
      position: relative;
    }
    
    .route-path-admin {
      height: 100%;
      background: #f8f9fa;
      border-radius: 8px;
      position: relative;
    }
    
    .driver-marker-admin {
      position: absolute;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--admin-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      animation: pulse 2s infinite;
    }
    
    .driver-marker-admin:hover .marker-tooltip {
      display: block;
    }
    
    .map-admin-legend {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: white;
      padding: 10px;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .legend-color.on-route { background: var(--secondary); }
    .legend-color.off-route { background: var(--danger); }
    .legend-color.stopped { background: var(--warning); }
    
    .schedule-manager {
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 20px;
      height: 600px;
    }
    
    .schedule-sidebar {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      overflow-y: auto;
    }
    
    .drivers-list-admin {
      max-height: 400px;
      overflow-y: auto;
    }
    
    .driver-admin-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: white;
      border-radius: 8px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all var(--transition);
    }
    
    .driver-admin-item:hover {
      background: #f0f0f0;
    }
    
    .driver-admin-item.selected {
      background: var(--admin-color);
      color: white;
    }
    
    .driver-admin-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .driver-admin-item.selected .driver-admin-avatar {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .btn-add-driver {
      width: 100%;
      padding: 12px;
      background: var(--admin-color);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }
    
    .schedule-main {
      background: white;
      border-radius: 8px;
      padding: 20px;
      overflow-y: auto;
    }
    
    .schedule-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .schedule-actions {
      display: flex;
      gap: 10px;
    }
    
    .schedule-editor {
      margin-bottom: 20px;
    }
    
    .month-selector {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .btn-prev-month, .btn-next-month {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #e0e0e0;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .schedule-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .schedule-days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-bottom: 5px;
    }
    
    .schedule-day-header {
      text-align: center;
      font-weight: 600;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 4px;
    }
    
    .schedule-week {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    
    .schedule-day {
      padding: 10px;
      border-radius: 4px;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition);
    }
    
    .schedule-day.working {
      background: #e8f5e9;
      color: #2e7d32;
    }
    
    .schedule-day.off {
      background: #f5f5f5;
      color: #666;
    }
    
    .schedule-day.vacation {
      background: #fff3e0;
      color: #ef6c00;
    }
    
    .schedule-day.today {
      border: 2px solid var(--admin-color);
    }
    
    .schedule-day:hover {
      transform: scale(1.05);
    }
    
    .day-number {
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 5px;
    }
    
    .day-shift {
      font-size: 12px;
    }
    
    .schedule-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }
    
    .legend-color.working { background: #e8f5e9; }
    .legend-color.off { background: #f5f5f5; }
    .legend-color.vacation { background: #fff3e0; }
    
    .schedule-summary {
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-top: 20px;
    }
    
    .summary-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 15px;
    }
    
    .summary-item {
      text-align: center;
    }
    
    .summary-item span {
      display: block;
      color: #666;
      font-size: 14px;
      margin-bottom: 5px;
    }
    
    .summary-item strong {
      font-size: 24px;
      color: var(--admin-color);
    }
    
    .feedback-filters {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .filter-group {
      flex: 1;
    }
    
    .filter-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: var(--dark);
    }
    
    .feedback-list-admin {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
    }
    
    .feedback-admin-item {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      border-left: 4px solid #ccc;
    }
    
    .feedback-admin-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    
    .feedback-badge {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .feedback-badge.suggestion {
      background: #e3f2fd;
      color: #1976d2;
    }
    
    .feedback-badge.complaint {
      background: #ffebee;
      color: #d32f2f;
    }
    
    .feedback-badge.praise {
      background: #f1f8e9;
      color: #689f38;
    }
    
    .feedback-badge.pending {
      background: #fff3e0;
      color: #ef6c00;
    }
    
    .feedback-admin-content {
      margin-bottom: 10px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 6px;
    }
    
    .feedback-admin-info {
      display: flex;
      gap: 20px;
      font-size: 12px;
      color: #666;
      margin-bottom: 10px;
    }
    
    .feedback-admin-actions {
      display: flex;
      gap: 10px;
    }
    
    .btn-mark-reviewed, .btn-reply {
      padding: 8px 15px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .btn-mark-reviewed {
      background: #e8f5e9;
      color: #2e7d32;
    }
    
    .btn-reply {
      background: #e3f2fd;
      color: #1976d2;
    }
    
    .feedback-stats {
      display: flex;
      justify-content: space-around;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .geofencing-config {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .slider-container {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-top: 10px;
    }
    
    .geofencing-map {
      height: 300px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .geofencing-alerts-list {
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 20px;
    }
    
    .geofencing-actions {
      display: flex;
      gap: 10px;
    }
    
    .btn-save-geofence, .btn-test-geofence {
      flex: 1;
      padding: 15px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .btn-save-geofence {
      background: var(--admin-color);
      color: white;
    }
    
    .btn-test-geofence {
      background: #f0f0f0;
      color: var(--dark);
    }
  </style>
</body>
</html>
